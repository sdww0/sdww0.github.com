<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>sdww0的博客</title><meta name="author" content="sdww0"><meta name="copyright" content="sdww0"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="sdww0的博客">
<meta property="og:url" content="http://sdww0.github.io/index.html">
<meta property="og:site_name" content="sdww0的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://typora-upload-picture.oss-cn-hangzhou.aliyuncs.com/img/202211141106503.png">
<meta property="article:author" content="sdww0">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://typora-upload-picture.oss-cn-hangzhou.aliyuncs.com/img/202211141106503.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://sdww0.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="ea8954a51e7e3e9874e27e687c2cb93e"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"已经","messageNext":"天没有更新了，文章内容可能过期"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'sdww0的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-11-14 11:31:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="http://typora-upload-picture.oss-cn-hangzhou.aliyuncs.com/img/202211141106503.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">sdww0的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">sdww0的博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/sdww0" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1315953661@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/17/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%89-%E5%85%B7%E4%BD%93%E8%AE%BE%E5%A4%87/" title="Virtio文档阅读笔记(三)具体设备"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/city_night_panorama_117682_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(三)具体设备"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/17/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%89-%E5%85%B7%E4%BD%93%E8%AE%BE%E5%A4%87/" title="Virtio文档阅读笔记(三)具体设备">Virtio文档阅读笔记(三)具体设备</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-16T16:00:00.000Z" title="发表于 2022-09-17 00:00:00">2022-09-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:06:10.864Z" title="更新于 2022-11-14 02:06:10">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">Virtio文档阅读笔记</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Virtio/">Virtio</a></span></div><div class="content">以下设备的顺序与文档顺序不太一样, 或者不全, 日后会补, 遗留的特征等不会写上来
块设备什么是块设备在文档中的定义如下: Virtio块设备是一个简单的虚拟块设备, 比如磁盘等, 读取和写入请求被放入在了队列中, 并由设备处理(可能不是顺序处理), 块设备的Device ID为2
块设备的特征bits


bit
特证名
解释



1
VIRTIO_BLK_F_SIZE_MAX
最大的任何segment的大小放在了size_max


2
VIRTIO_BLK_F_SEG_MAX
一个request的最大数量segment放在了seg_max


4
VIRTIO_BLK_F_GEOMETRY
Disk-style geometry放在了geometry


5
VIRTIO_BLK_F_RO
设备是只读


6
VIRTIO_BLK_F_BLK_SIZE
磁盘的块大小放在了blk_size


9
VIRTIO_BLK_F_FLUSH
支持缓存刷新命令


10
VIRTIO_BLK_F_TOPOLOGY
设备利用最佳I&#x2F;O对齐(optimal I&#x2F;O ali ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/16/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-MSI%E5%8F%8AMSI-X/" title="PCI+Express体系结构导读笔记(二)-MSI及MSI-X"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/japan_shirakawa_houses_mountains_trees_112963_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PCI+Express体系结构导读笔记(二)-MSI及MSI-X"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/16/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-MSI%E5%8F%8AMSI-X/" title="PCI+Express体系结构导读笔记(二)-MSI及MSI-X">PCI+Express体系结构导读笔记(二)-MSI及MSI-X</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-15T16:00:00.000Z" title="发表于 2022-09-16 00:00:00">2022-09-16</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:06:02.356Z" title="更新于 2022-11-14 02:06:02">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/PCI-Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0/">PCI+Express体系结构导读笔记</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PCI/">PCI</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/PCIe/">PCIe</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="content">MSI及MSI-X中断机制为什么提出这两个概念在这一篇中讲的原因为: MSI&#x2F;MSI-X机制的引入解决了传统Line-based Interrupt机制的限制, 包括:

无需经过I&#x2F;O APIC转发中断，直接通过PCI&#x2F;PCIe Memory Write Transaction向CPU发送中断，效率更高
每个PCI Function可以支持分配多个中断向量，满足同一个设备有多个不同中断请求的需要
当分配多个中断向量给同1个PCI Function时，提供按中断向量进行屏蔽的功能，更为灵活

在PCI中, MSI&#x2F;MSI-X为可选功能, PCIe必须要修支持64位的MSI或者MSI-X, 一个PCIe可以同时支持 INT#x&#x2F;MSI&#x2F;MSI-X, 但驱动只用启动其中一个, MSI&#x2F;MSI-X以Capability的形式存在于PCIe中
MSI&#x2F;MSI-X Capability结构MSI结构MSI的结构可以由四种方式组成, 分别为:

32位的Message结构
64位的Message结构
32位带中断的Ma ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/14/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="PCI+Express体系结构导读笔记(一)-基础介绍"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/ruins_man_loneliness_124279_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PCI+Express体系结构导读笔记(一)-基础介绍"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/14/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="PCI+Express体系结构导读笔记(一)-基础介绍">PCI+Express体系结构导读笔记(一)-基础介绍</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-13T16:00:00.000Z" title="发表于 2022-09-14 00:00:00">2022-09-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:05:56.125Z" title="更新于 2022-11-14 02:05:56">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/PCI-Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0/">PCI+Express体系结构导读笔记</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PCI/">PCI</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/PCIe/">PCIe</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="content">备注只注重架构以及软件的实现, 其余内部的具体信号还有其他的引脚不会记录
PCI的结构
如图所示, PCI总线的相关模块包括:

Host主桥
PCI总线
PCI桥
PCI设备

整个PCI架构以一个树状结构呈现, Host主桥用于连接CPU与PCI设备, PCI桥用于拓展PCI设备(树中的非叶子节点), PCI总线代表树中的枝, PCI设备则代表树中的所有节点(下面的定义中, PCI桥也是PCI设备的一部分,只是他是用于拓展其他PCI设备用的).
Host主桥Host主桥的主要功能有:

隔离处理器系统的存储器域与PCI总线域, 一个Host主桥对应一个PCI总线域
管理PCI总线域
完成处理器与PCI设备之间的数据交换

PCI总线PCI总线由HOST主桥以及PCI桥进行管理, 用来连接各种设备
PCI设备PCI总线中一共有三种设备:

PCI主设备, 可以通过总线仲裁获得PCI总线的使用权, 主动发出请求
PCI从设备, 只能被动接受来自HOST主桥或者其他PCI设备的读写请求
桥设备, 用于管理下游的PCI总线, 即为PCI桥

PCI总线规范中将PCI主从设备统称为PCI A ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E4%BC%A0%E8%BE%93%E5%BD%A2%E5%BC%8F/" title="Virtio文档阅读笔记(二)传输形式"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/cat_picture_window_silhouette_70090_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(二)传输形式"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E4%BC%A0%E8%BE%93%E5%BD%A2%E5%BC%8F/" title="Virtio文档阅读笔记(二)传输形式">Virtio文档阅读笔记(二)传输形式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-13T04:00:00.000Z" title="发表于 2022-09-13 12:00:00">2022-09-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:05:40.630Z" title="更新于 2022-11-14 02:05:40">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">Virtio文档阅读笔记</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Virtio/">Virtio</a></span></div><div class="content">Virtio的传输形式Virtio可以使用各种不同的总线, 因此标准分为Virtio通用部分和总线专用部分
基于PCI总线的Virtio发现PCI设备任何PCI供应商ID为0x1AF4且PCI设备ID为0x1000到0x107F(包括1000和107F)的PCI设备都是virtio设备, 这个范围内(0x1000-0x107F)的值标识是哪个virtio设备, PCI设备ID与Virtio设备计算方式为PCI设备ID &#x3D; 0x1040+Virtio设备ID, 此外, 根据设备类型, 设备可能使用过渡的PCI设备ID范围0x1000-0x103F. PCI的子设备供应商ID和PCI子设备ID可以反应PCI供应商和设备ID(毕竟原来的被占用了)



暂时PCI设备ID
Virtio设备类型



0x1000
网络设备


0x1001
块设备


0x1002
内存膨胀(memory ballooning)


0x1003
控制台


0x1004
SCSI host


0x1005
entropy source


0x1009
9P transport


一个例子: ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="Virtio文档阅读笔记(一)基础设备"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/boat_sea_alone_121414_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(一)基础设备"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="Virtio文档阅读笔记(一)基础设备">Virtio文档阅读笔记(一)基础设备</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-12T16:00:00.000Z" title="发表于 2022-09-13 00:00:00">2022-09-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:05:32.146Z" title="更新于 2022-11-14 02:05:32">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">Virtio文档阅读笔记</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Virtio/">Virtio</a></span></div><div class="content">备注
文档中的特殊说明比如驱动程序必须要干啥, 设备必须要干啥没总结了, 按着规矩来就好, 如果发现出问题了可以上文档里翻翻
有一些自认为多余的没加上来, 防止看的有点绕.

Virtio基本设施每个virtio设备通过一个特定的方法被发现(具体为PCI, MMIO, 通道IO), 每个设备包含以下的部分

设备状态字段(Device status field)
特征位 (Feature bits)
通知 (Notification)
设备配置空间 (Device Configuration space)
一个或多个虚拟队列 (one or more virtqueues)

设备状态字段包含该设备的状态:

ACKNOWLEDGE(1): 操作系统发现了这个设备, 认为这是个有效的virtio设备
DRIVER(2): 操作系统知道怎么驱动该设备
FAILED(128): 由于某种原因, 操作系统放弃驱动该设备
FEATURES_OK(8): 驱动程序确认了它理解的所有特征, 特征协商达成一致
DRIVER_OK(4): 驱动程序加载完成, 可以驱动该设备了
DEVICE_NEEDS ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/09/04/%E7%94%A8Rust%E6%94%B9%E5%86%99riscv-pk%E6%80%BB%E7%BB%93/" title="用Rust改写riscv-pk总结"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/dragon_classical_light_luster_surface_background_16050_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用Rust改写riscv-pk总结"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/09/04/%E7%94%A8Rust%E6%94%B9%E5%86%99riscv-pk%E6%80%BB%E7%BB%93/" title="用Rust改写riscv-pk总结">用Rust改写riscv-pk总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-03T16:00:00.000Z" title="发表于 2022-09-04 00:00:00">2022-09-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:05:23.601Z" title="更新于 2022-11-14 02:05:23">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/RISCV%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">RISCV学习记录</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RISCV/">RISCV</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Rust/">Rust</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%80%BB%E7%BB%93/">总结</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Proxy-Kernel/">Proxy Kernel</a></span></div><div class="content">闲话 最近闲来无事, 便想总结一下暑假进行的用Rust改写riscv-pk这个练手项目, 主要是为了熟悉一下rCore以及Rust, 也学会了用objdump来反汇编一个二进制文件进行debug, 目前看来除了rCore的文件系统以及一些驱动基本都熟悉了一遍, 因为riscv-pk的文件系统是直接交由宿主机完成, 它只是一个代理作用, 熟悉rCore的同时也了解了riscv-pk的pk部分, 与现在在看的x86_64的内存空间分布感觉差不多.
 总的来讲改写起来还是蛮有趣的, 主要有成就感的点有几个, 一个是当os输出hello world的时候(蛮简单的), 以及虚拟内存成功跑起来, 还有一个就是跑user-mode的elf文件, 并且syscall陷入trap, 最后一个点成就感比较明显. 但这一次改写只是搭建了一个框架, 实现了user-mode程序的hello world, 没有实现其他的syscall, 这一部分还是需要未来慢慢熟悉, 慢慢实现.
 最后补一句: rCore无论是教程还是代码都蛮不错, 建议去看看, 附:

rCore教程地址
rCore GitHub地址

 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/08/18/x86-64-%E5%AF%84%E5%AD%98%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="x86_64-寄存器详解"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/city_futurism_scifi_131831_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="x86_64-寄存器详解"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/08/18/x86-64-%E5%AF%84%E5%AD%98%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="x86_64-寄存器详解">x86_64-寄存器详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-18T04:00:00.000Z" title="发表于 2022-08-18 12:00:00">2022-08-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:05:08.917Z" title="更新于 2022-11-14 02:05:08">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/x86%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">x86学习记录</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%AF%84%E5%AD%98%E5%99%A8/">寄存器</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/x86-64/">x86_64</a></span></div><div class="content">说明这一篇的寄存器来自于Rust-x86_64库总结,讲解在registers下的一些寄存器, 随时更新
寄存器通用寄存器


寄存器名
作用
谁保存



%rax
返回值
-


%rbx

被调用者


%rcx
参数4
调用者


%rdx
参数3
调用者


%rsi
参数2
调用者


%rdi
参数1
调用者


%rbp

被调用者


%rsp
栈顶(指针)
-


%r8
参数5
调用者


%r9
参数6
调用者


%r10

调用者


%r11

调用者


%r12

被调用者


%r13

被调用者


%r14

被调用者


%r15

被调用者



还有一个指令寄存器RIP, 不知道放哪就放这了

Control Registers各个寄存器大致的说明:

CR0: 当前处理器运行的控制标志
CR2: 发生页面错误时的线性地址
CR3: 最高级页表的地址(与RISCV中的satp作用差不多)
CR4: 包含处理器扩展功能的标志位

图片:

CR0


位名
全称
作用(是否的话除特殊说明否则视为bool)



PE
Protected mo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/08/18/Rust-x86-64%E5%BA%93/" title="Rust-x86_64库"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/christmas_tree_christmas_new_year_art_118143_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust-x86_64库"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/08/18/Rust-x86-64%E5%BA%93/" title="Rust-x86_64库">Rust-x86_64库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-17T16:00:00.000Z" title="发表于 2022-08-18 00:00:00">2022-08-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:04:55.765Z" title="更新于 2022-11-14 02:04:55">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/x86%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">x86学习记录</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Rust/">Rust</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/x86-64/">x86_64</a></span></div><div class="content">原因最近在学x86_64的操作系统, blog os中用到了x86_64这个库, 看了一下里面蛮多东西都已经写好了, 可以直接用, 所以总结一下(由于里面的寄存器或者指令等可能不会用到,所以这篇会跟RISCV CSV详解那一张一样随时更新), 总结的同时也能了解一下x86的一些东西
首先列出来每个rs文件的作用, 之后会细讲里面的一些东西:
根目录


文件名
作用
备注



addr.rs
包含物理地址以及虚拟地址的结构体



lib.rs
库的lib, 包含一个特权级的enum



structures


文件名
作用
备注



gdt.rs
二级中断表, 指定每个中断入口函数后load启用
GlobalDescriptorTable


idt.rs
一级中断表, 指定每个中断入口函数后load启用
InterruptDescriptorTable


mod.rs
mod



port.rs
两个trait, 用于读写IO端口
提供给instructions包用的


tss.rs
用于描述一个TaskStateSegment
64位与32位有点区别,参见下面的表格 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/07/16/Rust-C-%E6%B1%87%E7%BC%96%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B0%83%E7%94%A8/" title="Rust-C-汇编之间的调用"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/room_book_read_evening_92289_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust-C-汇编之间的调用"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/07/16/Rust-C-%E6%B1%87%E7%BC%96%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B0%83%E7%94%A8/" title="Rust-C-汇编之间的调用">Rust-C-汇编之间的调用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-15T16:00:00.000Z" title="发表于 2022-07-16 00:00:00">2022-07-16</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:04:48.675Z" title="更新于 2022-11-14 02:04:48">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Rust%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">Rust学习记录</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Rust/">Rust</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/C/">C</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E6%B1%87%E7%BC%96/">汇编</a></span></div><div class="content">前言 最近在尝试Rust与C之间的混合编译, 在里面还夹杂着汇编文件来写特定的入口函数, 所以写这一篇记录Rust,C与汇编他们之间如何互相调用
首先来看C语言的源文件是如何变成可执行文件的

预处理(hello.c -&gt; hello.i) 将宏#define等替换
编译(hello.i -&gt; hello.s) 将预处理后的文件编译成汇编代码
汇编(hello.s -&gt; hello.o) 根据汇编生成目标文件(二进制)
链接(hello.o -&gt; hello.exe&#x2F;out) 将多个目标文件链接生成可执行代码

在这个过程中可以看见直接写汇编语言缺少了前面两项, 而C语言还是要生成汇编文件, 因此只要汇编和C语言都遵循一个规则它们就可以互相调用了

在不同的机器上参数传递标准似乎不太一样, 比如x86中似乎是直接将参数入栈以从右向左的方式来传递, 而在x86-64和RISCV等架构用一些专门的寄存器来传参数, 超过多少个参数才会使用栈来传递参数, 对于他们之间的具体差异可以见Linux X86架构参数传递规则, 本篇文章里面使用x86-64为例, 因为 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/07/14/RISCV-CSR%E5%AF%84%E5%AD%98%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="RISCV-CSR寄存器详解"><img class="post_bg" src="https://images.wallpaperscraft.com/image/single/flight_balloon_sky_86980_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RISCV-CSR寄存器详解"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/07/14/RISCV-CSR%E5%AF%84%E5%AD%98%E5%99%A8%E8%AF%A6%E8%A7%A3/" title="RISCV-CSR寄存器详解">RISCV-CSR寄存器详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-13T16:00:00.000Z" title="发表于 2022-07-14 00:00:00">2022-07-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-13T18:04:36.109Z" title="更新于 2022-11-14 02:04:36">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/RISCV%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">RISCV学习记录</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/RISCV/">RISCV</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E5%AF%84%E5%AD%98%E5%99%A8/">寄存器</a></span></div><div class="content">随着接触越来越多的寄存器, 这篇文章在未来会更新, S-mode的一些寄存器功能与M-mode中差不多名字的寄存器功能类似, 因此只截了图, 网站好像不支持markdown的目录结构,因此要找对应的寄存器说明可以直接网页Ctrl+F查找名字就好了
名词
WARL: (Write any value, read legal value) (写任何值,读合法值)
WLRL: (Write&#x2F;read only legal value) (读写合法值)
WPRL: (Reserved writes preseve values, reads ignore value) (将来可能会用到)

CSR寄存器快速一览(M-mode与S-mode)


M-mode CSR寄存器Machine ISA Register (misa)

MXL(Machine XLEN): 代表了XLEN的大小, 对应关系为:



MXL
XLEN



1
32


2
64


3
128



剩下的Extensions每个bit代表的意思为(感觉有点深了,就放个图吧):


Machine Stat ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="http://typora-upload-picture.oss-cn-hangzhou.aliyuncs.com/img/202211141106503.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">sdww0</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/sdww0" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1315953661@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/09/17/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%89-%E5%85%B7%E4%BD%93%E8%AE%BE%E5%A4%87/" title="Virtio文档阅读笔记(三)具体设备"><img src="https://images.wallpaperscraft.com/image/single/city_night_panorama_117682_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(三)具体设备"/></a><div class="content"><a class="title" href="/2022/09/17/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%89-%E5%85%B7%E4%BD%93%E8%AE%BE%E5%A4%87/" title="Virtio文档阅读笔记(三)具体设备">Virtio文档阅读笔记(三)具体设备</a><time datetime="2022-09-16T16:00:00.000Z" title="发表于 2022-09-17 00:00:00">2022-09-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/16/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-MSI%E5%8F%8AMSI-X/" title="PCI+Express体系结构导读笔记(二)-MSI及MSI-X"><img src="https://images.wallpaperscraft.com/image/single/japan_shirakawa_houses_mountains_trees_112963_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PCI+Express体系结构导读笔记(二)-MSI及MSI-X"/></a><div class="content"><a class="title" href="/2022/09/16/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-MSI%E5%8F%8AMSI-X/" title="PCI+Express体系结构导读笔记(二)-MSI及MSI-X">PCI+Express体系结构导读笔记(二)-MSI及MSI-X</a><time datetime="2022-09-15T16:00:00.000Z" title="发表于 2022-09-16 00:00:00">2022-09-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/14/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="PCI+Express体系结构导读笔记(一)-基础介绍"><img src="https://images.wallpaperscraft.com/image/single/ruins_man_loneliness_124279_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PCI+Express体系结构导读笔记(一)-基础介绍"/></a><div class="content"><a class="title" href="/2022/09/14/PCI+Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="PCI+Express体系结构导读笔记(一)-基础介绍">PCI+Express体系结构导读笔记(一)-基础介绍</a><time datetime="2022-09-13T16:00:00.000Z" title="发表于 2022-09-14 00:00:00">2022-09-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E4%BC%A0%E8%BE%93%E5%BD%A2%E5%BC%8F/" title="Virtio文档阅读笔记(二)传输形式"><img src="https://images.wallpaperscraft.com/image/single/cat_picture_window_silhouette_70090_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(二)传输形式"/></a><div class="content"><a class="title" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E4%BC%A0%E8%BE%93%E5%BD%A2%E5%BC%8F/" title="Virtio文档阅读笔记(二)传输形式">Virtio文档阅读笔记(二)传输形式</a><time datetime="2022-09-13T04:00:00.000Z" title="发表于 2022-09-13 12:00:00">2022-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="Virtio文档阅读笔记(一)基础设备"><img src="https://images.wallpaperscraft.com/image/single/boat_sea_alone_121414_1280x720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Virtio文档阅读笔记(一)基础设备"/></a><div class="content"><a class="title" href="/2022/09/13/virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80/" title="Virtio文档阅读笔记(一)基础设备">Virtio文档阅读笔记(一)基础设备</a><time datetime="2022-09-12T16:00:00.000Z" title="发表于 2022-09-13 00:00:00">2022-09-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PCI-Express%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%AF%BC%E8%AF%BB%E7%AC%94%E8%AE%B0/"><span class="card-category-list-name">PCI+Express体系结构导读笔记</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/RISCV%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><span class="card-category-list-name">RISCV学习记录</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Rust%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><span class="card-category-list-name">Rust学习记录</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Virtio%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"><span class="card-category-list-name">Virtio文档阅读笔记</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/x86%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><span class="card-category-list-name">x86学习记录</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8Cmod%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">我的世界mod开发学习</span><span class="card-category-list-count">9</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/PCI/" style="font-size: 1.21em; color: rgb(77, 98, 151)">PCI</a><a href="/tags/PCIe/" style="font-size: 1.21em; color: rgb(172, 160, 102)">PCIe</a><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 1.39em; color: rgb(31, 164, 72)">学习笔记</a><a href="/tags/RISCV/" style="font-size: 1.27em; color: rgb(62, 139, 51)">RISCV</a><a href="/tags/%E7%89%B9%E6%9D%83%E6%A8%A1%E5%BC%8F/" style="font-size: 1.15em; color: rgb(17, 44, 115)">特权模式</a><a href="/tags/%E5%AF%84%E5%AD%98%E5%99%A8/" style="font-size: 1.27em; color: rgb(129, 119, 112)">寄存器</a><a href="/tags/Rust/" style="font-size: 1.33em; color: rgb(20, 75, 120)">Rust</a><a href="/tags/C/" style="font-size: 1.15em; color: rgb(168, 166, 187)">C</a><a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 1.15em; color: rgb(147, 169, 9)">汇编</a><a href="/tags/x86-64/" style="font-size: 1.21em; color: rgb(142, 198, 3)">x86_64</a><a href="/tags/Virtio/" style="font-size: 1.27em; color: rgb(149, 194, 124)">Virtio</a><a href="/tags/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" style="font-size: 1.15em; color: rgb(161, 82, 4)">智能指针</a><a href="/tags/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8Cmod%E5%BC%80%E5%8F%91/" style="font-size: 1.45em; color: rgb(196, 179, 166)">我的世界mod开发</a><a href="/tags/forge/" style="font-size: 1.45em; color: rgb(9, 112, 2)">forge</a><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 1.15em; color: rgb(8, 53, 163)">总结</a><a href="/tags/Proxy-Kernel/" style="font-size: 1.15em; color: rgb(31, 6, 11)">Proxy Kernel</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">21</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">32.3k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-11-14T03:31:00.776Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By sdww0</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>